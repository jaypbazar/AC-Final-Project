{% extends "main.html" %}

{% block content %}
    <div class="container">
        <form id="generate-keys">
            <div class="row justify-contents-evenly">
                <div class="col-6">
                    <div class="field rounded-4 p-3">
                        <label for="private-key">Private Key</label>
                        <textarea id="private-key" name="private-key" class="form-control mt-2" placeholder="Private key goes here..." readonly></textarea>
                    </div>
                </div>
                <div class="col-6">
                    <div class="field rounded-4 p-3">
                        <label for="public-key">Public Key</label>
                        <textarea id="public-key" name="public-key" class="form-control mt-2" placeholder="Public key goes here..." readonly></textarea>
                    </div>
                </div>
            </div>
            <input type="submit" class="btn mt-3 rounded-pill" value="Generate Key-Value Pair">
        </form>
        <br>
        <form id="rsaForm">
            <div class="row justify-content-evenly mt-3">
                <div class="col-4">
                    <div class="field rounded-4 p-3">
                        <label for="text-input">Text</label>
                        <textarea id="text-input" name="text-input" class="form-control mt-2" placeholder="Enter text..." required>{{ text if text }}</textarea>
                    </div>
                </div>
                <div class="col-4">
                    <div class="field rounded-4 p-3">
                        <label for="key">Key</label>
                        <textarea type="text" id="key" name="key" class="form-control mt-2" placeholder="Enter key..." value="{{ keys if keys }}" required>{{ key if key }}</textarea>
                    </div>
                </div>
                <div class="col-4">
                    <div class="field rounded-4 p-3">
                        <label for="output">Output</label>
                        <textarea id="output" class="form-control mt-2" placeholder="Result..." readonly>{{ output if output }}</textarea>
                    </div>
                </div>
            </div>
            <div class="row justify-content-evenly my-3">
                <div class="col-3">
                    <div class="field my-3 p-3 h-auto rounded-4">
                        <h5>Select one:</h5>
                        <div class="form-check fs-5">
                            <input type="radio" name="mode" id="encrypt" value="encrypt" checked>
                            <label for="encrypt">Encrypt</label>
                        </div>
                        <div class="form-check fs-5">
                            <input type="radio" name="mode" id="decrypt" value="decrypt">
                            <label for="decrypt">Decrypt</label>
                        </div>
                        <div class="d-flex justify-content-center">
                            <input type="submit" class="btn mt-3 rounded-pill" value="Process">
                        </div>
                    </div>
                </div>
                <div class="col-9">
                    <div class="field my-3 p-3 h-auto rounded-4" id="process-table">
                        <h4>Summary</h4>
                        <div class="justify-content-between text-center bg-secondary p-2 rounded-3">
                            <div class="row">
                                <div class="col-4">Text</div>
                                <div class="col-4" id="summary-key">Key</div>
                                <div class="col-4">Output</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>    
    </div>
{% endblock content %}

{% block addedscript %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const encryptRadio = document.getElementById('encrypt');
        const decryptRadio = document.getElementById('decrypt');
        const keyLabel = document.querySelector('label[for="key"]');
        const keyInput = document.getElementById('key');
        const summaryKey = document.getElementById('summary-key');

        function updateKeyLabel() {
            const isEncrypt = encryptRadio.checked;
            keyLabel.textContent = isEncrypt ? 'Public Key' : 'Private Key';
            keyInput.placeholder = `Enter ${isEncrypt ? 'public' : 'private'} key...`;
            summaryKey.textContent = isEncrypt ? 'Public Key' : 'Private Key';
        }

        // Set initial label state
        updateKeyLabel();

        // Add event listeners to radio buttons
        encryptRadio.addEventListener('change', updateKeyLabel);
        decryptRadio.addEventListener('change', updateKeyLabel);
    });
</script>
{% endblock addedscript %}